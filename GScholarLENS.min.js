const QbackgroundColor=[["rgba(166, 54, 3, 0.4)","rgba(84, 39, 143, 0.4)","rgba(0, 109, 44, 0.4)","rgba(8, 81, 156, 0.4)"],["rgba(230, 85, 13, 0.4)","rgba(117, 107, 177, 0.4)","rgba(49, 163, 84, 0.4)","rgba(49, 130, 189,0.4)"],["rgba(253, 141, 60, 0.4)","rgba(158, 154, 200, 0.4)","rgba(116, 196, 118, 0.4)","rgba(107, 174, 214, 0.4)"],["rgba(253, 190, 133, 0.4)","rgba(203, 201, 226, 0.4)","rgba(186, 228, 179, 0.4)","rgba(189, 215, 231, 0.4)"],["rgba(254, 237, 222, 0.4)","rgba(242, 240, 247, 0.4)","rgba(237, 248, 233, 0.4)","rgba(239, 243, 255, 0.4)"]],QborderColor=[["rgb(127, 44, 2)","rgb(58, 27, 107)","rgb(0, 75, 28)","rgb(5, 52, 105)"],["rgb(179, 63, 11)","rgb(89, 79, 137)","rgb(38, 122, 62)","rgb(35, 97, 138)"],["rgb(184, 94, 42)","rgb(108, 106, 148)","rgb(78, 139, 82)","rgb(73, 115, 155)"],["rgb(194, 151, 99)","rgb(157, 156, 186)","rgb(145, 161, 135)","rgb(148, 173, 197)"],["rgb(205, 141, 108)","rgb(180, 168, 207)","rgb(157, 208, 150)","rgb(150, 180, 230)"]],backgroundColor=["rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(54, 162, 235, 0.2)"],borderColor=["rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(54, 162, 235, 1)"];function getRandomNumber(t,o){return Math.floor(Math.random()*(o-t+1))+t}function generateRandomNumbers(t,o){let r=[],e=0;for(let a=0;a<o-1;a++){let n=Math.floor(Math.random()*(t-e));r.push(n),e+=n}return r.push(t-e),r}const QScorePosStackedChart_Q1=[getRandomNumber(0,100),getRandomNumber(0,100),getRandomNumber(0,100),getRandomNumber(0,100)],QScorePosStackedChart_Q2=[getRandomNumber(0,100),getRandomNumber(0,100),getRandomNumber(0,100),getRandomNumber(0,100)],QScorePosStackedChart_Q3=[getRandomNumber(0,100),getRandomNumber(0,100),getRandomNumber(0,100),getRandomNumber(0,100)],QScorePosStackedChart_Q4=[getRandomNumber(0,100),getRandomNumber(0,100),getRandomNumber(0,100),getRandomNumber(0,100)],QScorePosStackedChart_NA=[getRandomNumber(0,100),getRandomNumber(0,100),getRandomNumber(0,100),getRandomNumber(0,100)];function createQScorePosStackedChart(){let t={labels:["First Author","Second Author","Co Author","Corresponding Author"],datasets:[{label:"Q1",data:QScorePosStackedChart_Q1,backgroundColor:QbackgroundColor[0],borderColor:QborderColor[0],borderWidth:1},{label:"Q2",data:QScorePosStackedChart_Q2,backgroundColor:QbackgroundColor[1],borderColor:QborderColor[1],borderWidth:1},{label:"Q3",data:QScorePosStackedChart_Q3,backgroundColor:QbackgroundColor[2],borderColor:QborderColor[2],borderWidth:1},{label:"Q4",data:QScorePosStackedChart_Q4,backgroundColor:QbackgroundColor[3],borderColor:QborderColor[3],borderWidth:1},{label:"NA",data:QScorePosStackedChart_NA,backgroundColor:QbackgroundColor[4],borderColor:QborderColor[4],borderWidth:1},]};new Chart("qScorePosStackedChart",{type:"bar",data:t,options:{plugins:{title:{display:!0,text:"Publication Count By Authorship"},legend:{display:!1}},responsive:!0,scales:{x:{stacked:!0,grid:{color:"rgba(0, 0, 0, 0.05)"}},y:{stacked:!0,grid:{color:"rgba(0, 0, 0, 0.05)"}}}}})}const AuthorCitations_Q1=[getRandomNumber(0,100),getRandomNumber(0,100),getRandomNumber(0,100),getRandomNumber(0,100)],AuthorCitations_Q2=[getRandomNumber(0,100),getRandomNumber(0,100),getRandomNumber(0,100),getRandomNumber(0,100)],AuthorCitations_Q3=[getRandomNumber(0,100),getRandomNumber(0,100),getRandomNumber(0,100),getRandomNumber(0,100)],AuthorCitations_Q4=[getRandomNumber(0,100),getRandomNumber(0,100),getRandomNumber(0,100),getRandomNumber(0,100)],AuthorCitations_NA=[getRandomNumber(0,100),getRandomNumber(0,100),getRandomNumber(0,100),getRandomNumber(0,100)];function createAuthorCitationsChart(){let t={labels:["First Author Citations","Second Author Citations","Co-Author Citations","Corresponding Author Citations"],datasets:[{label:"Q1 Citations",data:AuthorCitations_Q1,backgroundColor:QbackgroundColor[0],borderColor:QborderColor[0],borderWidth:1},{label:"Q2 Citations",data:AuthorCitations_Q2,backgroundColor:QbackgroundColor[1],borderColor:QborderColor[1],borderWidth:1},{label:"Q3 Citations",data:AuthorCitations_Q3,backgroundColor:QbackgroundColor[2],borderColor:QborderColor[2],borderWidth:1},{label:"Q4 Citations",data:AuthorCitations_Q4,backgroundColor:QbackgroundColor[3],borderColor:QborderColor[3],borderWidth:1},{label:"NA Citations",data:AuthorCitations_NA,backgroundColor:QbackgroundColor[4],borderColor:QborderColor[4],borderWidth:1},]};new Chart("authorCitationsChart",{type:"bar",data:t,options:{plugins:{title:{display:!0,text:"Citation Count By Authorship"},legend:{display:!1}},responsive:!0,scales:{x:{stacked:!0,grid:{color:"rgba(0, 0, 0, 0.05)"}},y:{stacked:!0,grid:{color:"rgba(0, 0, 0, 0.05)"}}}}})}const MAX_PUBLICATIONS=getRandomNumber(0,50),MAX_CITATIONS=getRandomNumber(0,800),pub_count=getRandomNumber(0,MAX_PUBLICATIONS),getCitationDistValues=()=>{let t=[];for(let o=0;o<getRandomNumber(pub_count-1,pub_count);o++)t.push(getRandomNumber(0,MAX_CITATIONS));return t},AuthorCitationDistributions=[getCitationDistValues(),getCitationDistValues(),getCitationDistValues(),getCitationDistValues()];function createAuthorCitationsDistChart(){let t={labels:["First Author Citations","Second Author Citations","Co-Author Citations","Corresponding Author Citations"],datasets:[{label:"Citation Distribution",data:AuthorCitationDistributions,backgroundColor:QbackgroundColor[0],borderColor:QborderColor[0],borderWidth:1},]};new Chart("authorCitationsDistChart",{type:"violin",data:t,options:{plugins:{title:{display:!0,text:"Citation Distribution By Authorship"},legend:{display:!1}},responsive:!0,whiskersMode:"exact",coef:0,scales:{x:{stacked:!0,grid:{color:"rgba(0, 0, 0, 0.05)"}},y:{stacked:!0,type:"logarithmic",grid:{color:"rgba(0, 0, 0, 0.05)"}}}}})}const AuthorContributionPercentages=generateRandomNumbers(100,4);function createAuthorStackedChart(){let t={labels:[""],datasets:[{label:"First Author Contribution %",data:[AuthorContributionPercentages[0]],backgroundColor:backgroundColor[0],borderColor:borderColor[0],borderWidth:1},{label:"Second Author Contribution %",data:[AuthorContributionPercentages[1]],backgroundColor:backgroundColor[1],borderColor:borderColor[1],borderWidth:1},{label:"Co-Author Contribution %",data:[AuthorContributionPercentages[2]],backgroundColor:backgroundColor[2],borderColor:borderColor[2],borderWidth:1},{label:"Corresponding Author Contribution %",data:[AuthorContributionPercentages[3]],backgroundColor:backgroundColor[3],borderColor:borderColor[3],borderWidth:1}]};new Chart("authorStackedChart",{type:"bar",data:t,options:{plugins:{title:{display:!0,text:"Author Contribution in % based on Authorship"},legend:{display:!1}},indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{stacked:!0,grid:{color:"rgba(0, 0, 0, 0.05)"}},y:{stacked:!0,grid:{color:"rgba(0, 0, 0, 0.05)"}}}}})}const AuthorCitationPercentages=generateRandomNumbers(100,4);function createCitationsStackedChart(){let t={labels:[""],datasets:[{label:"First Author Citations %",data:[AuthorCitationPercentages[0]],backgroundColor:backgroundColor[0],borderColor:borderColor[0],borderWidth:1},{label:"Second Author Citations %",data:[AuthorCitationPercentages[1]],backgroundColor:backgroundColor[1],borderColor:borderColor[1],borderWidth:1},{label:"Co-Author Citations %",data:[AuthorCitationPercentages[2]],backgroundColor:backgroundColor[2],borderColor:borderColor[2],borderWidth:1},{label:"Corresponding Author Citations %",data:[AuthorCitationPercentages[3]],backgroundColor:backgroundColor[3],borderColor:borderColor[3],borderWidth:1}]};new Chart("citationsStackedChart",{type:"bar",data:t,options:{plugins:{title:{display:!0,text:"Citation Contribution in % based on Authorship"},legend:{display:!1}},indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{stacked:!0,grid:{color:"rgba(0, 0, 0, 0.05)"}},y:{stacked:!0,grid:{color:"rgba(0, 0, 0, 0.05)"}}}}})}const fontPath="fonts/SchibstedGrotesk.ttf",schibsted_grotesk=new FontFace("schibsted-grotesk","url(fonts/SchibstedGrotesk.ttf)");function colorWords(){document.getElementById("redWord").style.color="red"}function blinkText(t,o=500){let r=document.getElementById(t),e=!0;setInterval(()=>{r.style.visibility=e?"hidden":"visible",e=!e},o)}function blinkTextColor(t,o,r,e=500){let a=document.getElementById(t),n=!0;setInterval(()=>{a.style.color=n?o:r,n=!n},e)}schibsted_grotesk.load().then(t=>{document.fonts.add(t),document.body.style.fontFamily="schibsted-grotesk, sans-serif"}).catch(t=>{console.error("Font failed to load:",t)});const selectedList=[];function getUniqueRandomPair(t,o){let r,e;do{if(0===t[r=getRandomNumber(0,t.length-1)].length)continue;e=getRandomNumber(0,t[r].length-1)}while(o.some(([t,o])=>t===r&&o===e));return[r,e]}let tsvContent=`Index	Title	Authorship	AuthorCount	Citations	AdjustedCitations	AdjustmentWeight
`;const Publications=[[],[],[],[]];function generatePublications(){let t=["First Author","Second Author","Co-Author","Corresponding Author"],o=[.9,.5,.1,1];for(let r=0;r<MAX_PUBLICATIONS;r++){let e=getUniqueRandomPair(AuthorCitationDistributions,selectedList),a=e[0],n=getRandomNumber(a,10),i=e[1];selectedList.push(e);let d=AuthorCitationDistributions[a][i],s=t[a],$=2===a?n>6?.1:.25:o[a],l={id:r,title:crypto.randomUUID().replaceAll("-",""),authorPos:s,authorCount:n,citation:d,adjustedCitation:d*$,adjustmentWeight:$,authorshipIndex:a};Publications[a].push(l),tsvContent+=`${l.id}	${l.title}	${l.authorPos}	${l.authorCount}	${l.citation}	${l.adjustedCitation}	${l.adjustmentWeight}
`,selectedList.push([a,i])}}function createButtons(){let t=document.createElement("button");t.id="inject-content-button",t.textContent="Run GScholarLENS",t.textContent.color="white",t.style.display="flex",t.style.alignItems="center",t.style.gap="5px",t.style.fontSize="16px",t.style.color="white",t.style.marginTop="10px",t.style.marginBottom="10px",t.style.zIndex="1000",t.style.borderRadius="7px",t.style.cursor="pointer",t.style.boxShadow="3px 3px 5px rgba(0,0,0,0.6)",t.style.fontFamily="schibsted-grotesk, sans-serif",t.style.backgroundColor="rgba(0,0,0,0.8)";let o=document.createElement("img");o.src="icons/icon128.png",o.alt="GScholarLENS",o.style.height="20px",o.style.width="20px",o.style.objectFit="contain",t.prepend(o);let r=document.getElementById("scholarlens-button");r.append(t);let e=document.createElement("button");e.style.display="none",e.style.fontFamily="schibsted-grotesk, sans-serif",e.textContent="Download Publications",e.addEventListener("click",()=>{let t=new Blob([tsvContent],{type:"text/tab-separated-values"}),o=URL.createObjectURL(t),r=document.createElement("a");r.href=o,r.download="sample_publications.tsv",r.click()});let a=document.getElementById("download-button");a.append(e),t.addEventListener("click",()=>{document.getElementById("website_body").style.display="block",e.style.display="block"},{passive:!0})}function createShIndex(){let t=[0,0,0,0],o=[],r=0;Publications.forEach((r,e)=>{r.sort((t,o)=>o.adjustedCitation-t.adjustedCitation),r.forEach((r,a)=>{let n=Number(r.adjustedCitation);o.push(n),n>=a+1&&(t[e]=a+1)})}),o.sort((t,o)=>o-t),o.forEach((t,o)=>{parseInt(t)>r&&r++}),document.getElementById("sh_index").textContent=`Sh-Index:${r.toFixed(0)}`,document.getElementById("h_first").textContent=t[0].toString(),document.getElementById("h_second").textContent=t[1].toString(),document.getElementById("h_other").textContent=t[2].toString(),document.getElementById("h_co").textContent=t[3].toString()}createQScorePosStackedChart(),createAuthorCitationsChart(),createAuthorCitationsDistChart(),createAuthorStackedChart(),createCitationsStackedChart(),generatePublications(),createShIndex(),colorWords(),blinkText("redWord",500),createButtons();